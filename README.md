# EOC - End Of Coffee App

[![Greenkeeper badge](https://badges.greenkeeper.io/sandstreamdev/eoc.svg)](https://greenkeeper.io/)
[![All Contributors](https://img.shields.io/badge/all_contributors-4-orange.svg?style=flat-square)](#contributors-)

An app made by Sandstream Development team, to track office inventory, groceries, and even your daily tasks!

![Eoc custom badge](https://img.shields.io/badge/EOC-App-orange)
![main language](https://img.shields.io/github/languages/top/sandstreamdev/eoc)
![dependencies status](https://img.shields.io/david/sandstreamdev/eoc)
![repository size](https://img.shields.io/github/repo-size/sandstreamdev/eoc)
![last commit](https://img.shields.io/github/last-commit/sandstreamdev/eoc)

## Main application tech stack

App uses WebSockets technology via `Socket.io` library to provide a better user experience.

Client:

- React.js,
- Redux

Server:

- Node,
- Express.js

Database:

- MongoDB

## Installation

Please remember first to create .env file in the root directory of the project and add necessary .env keys that you can find in the .env-example file.

#### 1. Clone the repository

```
git clone https://github.com/sandstreamdev/eoc.git
```

#### 2. Go inside the directory

```
cd eoc
```

#### 3. Install dependencies

```
npm install
```

#### 4. Run database

```
monogod
```

#### 5. Start the development server

```
npm run dev
```

## Build for production

```
npm run build
```

## Seeding database for development

At first run of the app, log in and check your user id in the database under eoc/users directory. Put that user ID, generated by mongo to .env file under USER_ID variable and save the file. Then simply run npm run seed.

#### Seeding is not working?

Probably USER_ID in your database is not matching with USER_ID in your .env file. Be aware that if you clean up the whole database with users collection, your USER_ID delivered by mongo will be different compared to the previous session.

#### Tip:

When playing with data via MongoDB Compass, always clean all the collections omitting users collection, so you don't have to deal with USER_ID configuration over and over again.

## Available scripts

```
 "check": - runs lint, format and stylelint scripts together,
 "clear-demo": - clears demo data from the database,
 "build:dev": - builds for development,
 "build:prod": - builds for production,
 "dev": - runs development server,
 "format": - formats all the files using Prettier,
 "format:fix": - formats and fix all the files using Prettier,
 "libs": "scripts/libs.sh -j server/data/libraries.json -m LIBRARIES.md",
 "lint": - lint all the files using eslint,
 "lint:fix": - lint and fix all files using eslint,
 "migrate": - runs migration script,
 "migrate:up":  - migrate database up,
 "migrate:down":  - migrate database down,
 "seed": - seed database with demo data,
 "start:client:dev": - start client dev server,
 "start:server:dev": - start dev server,
 "start:server:prod": - start production server,
 "stylelint": - stylelint all style files,
 "stylelint:fix": - stylelint and fix all style files,
 "test": - run tests
```

## Database migrations

To perform DB migrations we use `migrate-mongo` tool. To config `migrate-mongo` edit `migrate-mongo-config.js` file. To create migration file run `npm run migrate create <version>` in your terminal. Migration file will be created at server/migrations directory. To run all new migrations run `npm run migrate:up` or `npm run migrate up` in your terminal. To rollback, last migration run `npm run migrate:down` or `npm run migrate down` in your terminal. To see migrations status run `npm run migrate status` in your terminal.

## Third-party licenses

To generate json and markdown files containing third-party licenses you need to
install globally: [license-checker](https://github.com/davglass/license-checker#readme) and [npm-license-crawler](https://github.com/mwittig/npm-license-crawler):

#### 1. Install packages globally

```
npm i license-checker npm-license-crawler -g
```

#### 2. Go inside the directory

```
cd eoc
```

#### 3. Run libs script

This script create two files: JSON file and markdown file.

The first one contains data about packages used in the project. It is used by controllers: `getLibraries` and `getLicense` to extract this data and send it to the client to display information about the used package.

The second file contains a list of packages used in the project with links to their repositories and license file. It is available on the project repository page.

```
npm run libs -j path/to/json/file [-m path/to/md/file]
```

## Contributing

Pull requests are welcome. For major changes, please open an issue first to discuss what you would like to change.

Please make sure to update tests as appropriate.

## License and trademarks info

- FontAwesome Free. Check [Font Awesome license](https://fontawesome.com/license) ,
- Google [Trademark Logo](https://www.google.com/permissions/logos-trademarks) : ©2018 Google LLC All rights reserved. Google and the Google logo are registered trademarks of Google LLC.
- [Pravatar API](https://pravatar.cc/). It is published under [CC0 license](https://creativecommons.org/share-your-work/public-domain/cc0/). Pravatar uses photos from [Pexels](https://www.pexels.com/).

## Contributors ✨

Thanks goes to these wonderful people ([emoji key](https://allcontributors.org/docs/en/emoji-key)):

<!-- ALL-CONTRIBUTORS-LIST:START - Do not remove or modify this section -->
<!-- prettier-ignore -->
<table>
  <tr>
    <td align="center"><a href="https://github.com/sandstreamdevelopment"><img src="https://avatars2.githubusercontent.com/u/44231396?v=4" width="100px;" alt="sandstreamdevelopment"/><br /><sub><b>sandstreamdevelopment</b></sub></a><br /><a href="#business-sandstreamdevelopment" title="Business development">💼</a> <a href="#financial-sandstreamdevelopment" title="Financial">💵</a> <a href="#ideas-sandstreamdevelopment" title="Ideas, Planning, & Feedback">🤔</a></td>
    <td align="center"><a href="https://github.com/adamklepacz"><img src="https://avatars2.githubusercontent.com/u/27632432?v=4" width="100px;" alt="Adam Klepacz"/><br /><sub><b>Adam Klepacz</b></sub></a><br /><a href="https://github.com/sandstreamdev/eoc/commits?author=adamklepacz" title="Code">💻</a> <a href="https://github.com/sandstreamdev/eoc/commits?author=adamklepacz" title="Documentation">📖</a> <a href="#design-adamklepacz" title="Design">🎨</a> <a href="#ideas-adamklepacz" title="Ideas, Planning, & Feedback">🤔</a> <a href="#review-adamklepacz" title="Reviewed Pull Requests">👀</a></td>
    <td align="center"><a href="http://www.aleksander.fret.com.pl"><img src="https://avatars0.githubusercontent.com/u/25374390?v=4" width="100px;" alt="Aleksander Fret"/><br /><sub><b>Aleksander Fret</b></sub></a><br /><a href="https://github.com/sandstreamdev/eoc/commits?author=alemikolo" title="Code">💻</a> <a href="https://github.com/sandstreamdev/eoc/commits?author=alemikolo" title="Documentation">📖</a> <a href="#design-alemikolo" title="Design">🎨</a> <a href="#ideas-alemikolo" title="Ideas, Planning, & Feedback">🤔</a> <a href="#review-alemikolo" title="Reviewed Pull Requests">👀</a></td>
    <td align="center"><a href="https://github.com/marekrozmus"><img src="https://avatars3.githubusercontent.com/u/26272040?v=4" width="100px;" alt="Marek Rozmus"/><br /><sub><b>Marek Rozmus</b></sub></a><br /><a href="#review-marekrozmus" title="Reviewed Pull Requests">👀</a> <a href="https://github.com/sandstreamdev/eoc/commits?author=marekrozmus" title="Code">💻</a> <a href="https://github.com/sandstreamdev/eoc/commits?author=marekrozmus" title="Documentation">📖</a> <a href="#design-marekrozmus" title="Design">🎨</a> <a href="#ideas-marekrozmus" title="Ideas, Planning, & Feedback">🤔</a> <a href="#infra-marekrozmus" title="Infrastructure (Hosting, Build-Tools, etc)">🚇</a> <a href="#projectManagement-marekrozmus" title="Project Management">📆</a></td>
    <td align="center"><a href="https://github.com/przemyslawzalewski"><img src="https://avatars0.githubusercontent.com/u/30114244?v=4" width="100px;" alt="Przemysław Zalewski"/><br /><sub><b>Przemysław Zalewski</b></sub></a><br /><a href="#review-przemyslawzalewski" title="Reviewed Pull Requests">👀</a> <a href="#ideas-przemyslawzalewski" title="Ideas, Planning, & Feedback">🤔</a></td>
    <td align="center"><a href="http://mariusz.cc"><img src="https://avatars0.githubusercontent.com/u/380?v=4" width="100px;" alt="Mariusz Cieśla"/><br /><sub><b>Mariusz Cieśla</b></sub></a><br /><a href="https://github.com/sandstreamdev/eoc/issues?q=author%3Amariusz" title="Bug reports">🐛</a> <a href="#ideas-mariusz" title="Ideas, Planning, & Feedback">🤔</a></td>
  </tr>
</table>

<!-- ALL-CONTRIBUTORS-LIST:END -->

This project follows the [all-contributors](https://github.com/all-contributors/all-contributors) specification. Contributions of any kind welcome!
